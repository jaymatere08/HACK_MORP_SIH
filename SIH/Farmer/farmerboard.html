<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Farmer Dashboard</title>
    <link rel="icon" type="image" href="Logo_top.png">
    <link rel="stylesheet" href="farmerboard.css">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
      
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>   
</head>
<body>
    
    <div class="navbar">
        <div class="webisteName">
            <h4 class="logo">KrishiChain</h4>
        </div>
        <div class="nav-options">
            <a href="C:\Users\sarth\OneDrive\Attachments\Desktop\SIH\index.html"><button type="button">üè† Home</button></a>
            <a href="farmersell.html"><button type="button">‚ûï Sell Products</button></a>
            <a href="farmercart.html"><button type="button">üíºSales History</button></a>
            <button onclick="logoutUser()">Logout</button>
        </div>
    </div>

    <div class="main">
        <div class="top-part">
            <div class="welcome-section">
                <img src="farmer.jpg" alt="Market">
                <div class="overlay">
                    <h1>Namaste  <span id="pName"></span> üôè</h1>
                    <p>Your harvest deserves the best market. Start selling your products today and grow with us."</p>
                </div>
            </div>
            
            <div class="profile-page">
                <div class="consumer-profile">
                    <p>üë§</p>
                    <span><h3>Farmer Profile</h3></span>
                </div>
                <div class="profile-details">
                    <p>Farmer ID: <span id="pID"></span></p>
                    <p>Full Name: <span id="pName2"></span></p>
                    <p>Location: <span id="pLocation"></span></p>
                    <p>Member Since: <span id="pMember"></span></p>
                    <p>Contact: <span id="pContact"></span></p>
                    <p>Rating:‚≠ê <span id="pPreference"></span></p>
                    <p>Total sells: <span id="pOrders"></span></p>
                    <p>Status: <span id="pStatus"></span></p>
                </div>

            </div>

        </div>
        

            

        


    </div>

    <script>
        let userN = JSON.parse(localStorage.getItem("userData"));
            if(userN){
                document.getElementById("pName").innerText = user.name;
                document.getElementById("pName2").innerText = user.name;
                document.getElementById("pContact").innerText = user.contact;
                document.getElementById("pLocation").innerText = user.location;
                document.getElementById("pMember").innerText = user.memberSince;
                document.getElementById("pStatus").innerText = user.status;
                document.getElementById("pOrders").innerText = user.totalOrders;
            } else {
                window.location.href = "farmer.html";
            }
    </script>
    
    <!-- Sales Graph -->
        <div class="container my-5">
            <div class="card shadow">
                <div class="card-header bg-success text-white">
                    üìä Sales Trends (Past Year)
                </div>
                <div class="card-body">
                    <canvas id="salesChart" height="100"></canvas>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Load profile data
        let user = JSON.parse(localStorage.getItem("userData"));
        if(user){
            document.getElementById("pName").innerText = user.name;
            document.getElementById("pName2").innerText = user.name;
            document.getElementById("pContact").innerText = user.contact;
            document.getElementById("pLocation").innerText = user.location;
            document.getElementById("pMember").innerText = user.memberSince;
            document.getElementById("pStatus").innerText = user.status;
            document.getElementById("pOrders").innerText = user.totalOrders;
        } else {
            window.location.href = "loginConsumer.html";
        }

        // Logout
        function logoutUser() {
            localStorage.removeItem("userData");
            alert("You have been logged out!");
            window.location.href = "farmer.html";
        }

        // Chart.js Sales Graph
        const ctx = document.getElementById("salesChart").getContext("2d");
        new Chart(ctx, {
            type: "bar",
            data: {
                labels: [
                    "Jan", "Feb", "Mar", "Apr", "May", "Jun",
                    "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
                ],
                datasets: [{
                    label: "Total Sales (‚Çπ)",
                    data: [12000, 15000, 18000, 13000, 20000, 22000, 25000, 24000, 21000, 27000, 30000, 28000],
                    backgroundColor: "#66bb6a",
                    borderRadius: 8,
                    hoverBackgroundColor: "#43a047"
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: true,
                        labels: { font: { size: 14 } }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { callback: value => "‚Çπ" + value }
                    }
                }
            }
        });
    </script>

   
    
    <script>
        function logoutUser() {
        localStorage.removeItem("userData");   // sirf userData clear karega
    
        alert("You have been logged out!");
        window.location.href = "loginConsumer.html"; // wapas login page bhej dega
        }
    </script>
    

</body>
</html>